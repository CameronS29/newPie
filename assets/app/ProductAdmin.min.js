function ProductFilter(n){ProductDetail.GetProductList(n,FilterProductCallback)}function FilterProductsCustom(n){ProductDetail.GetProductListQuick(n,FilterProductCallback)}function FilterProductCallback(n){SetMyHTML("ProductListEdit",n.value)}function AddPhoto(){popWin("AddPhoto.aspx",500,500)}function AddNewProduct(){NewProduct();$("#ProductForm").modal("show")}function GetPricing(){var n=$("#epricing_group").val();$("#PricingForm").modal("show");GetPricingListByScheme(n)}function GetPricingListByScheme(n){ProductDetail.Listpricing(n,GetPriceListCallback);SetMyElement("pSchemeFilter",n)}function GetPriceListCallback(n){SetMyHTML("FillPricingList",n.value)}function NewProduct(){var n=ProductDetail.GetproductsClass().value;SetMyElement("eProductID",n.productID);SetMyElement("epricing_group",escapeNull(n.pricing_group,""));SetMyElement("eIngredientsID",escapeNull(n.IngredientsID,""));SetMyElement("eCategory",escapeNull(n.Category,""));SetMyElement("eProductName",escapeNull(n.ProductName,""));SetMyElement("eProductDescription",escapeNull(n.ProductDescription,""));SetChecked("eActive",IntYesNo(n.active));SetChecked("eInStock",IntYesNo(n.InStock));SetChecked("eFresh",IntYesNo(n.Fresh));SetChecked("eFeatured",IntYesNo(n.Featured));SetMyElement("eRating",escapeNull(n.Rating,"0"));SetMyHTML("edate_row","");SetMyHTML("prod_err","")}function EditProduct(){var n=$("#MyProductID").val();$("#ProductForm").modal("show");ProductDetail.Getproducts(n,FillproductsForm)}function FillproductsForm(n){var i,t;if(n.value==null||n.error!=null)return!1;i=n.value.Tables[0].Rows.length;i>=1&&(t=n.value.Tables[0].Rows[0],SetMyElement("eProductID",escapeNull(t.productID,0)),SetMyElement("epricing_group",escapeNull(t.pricing_group,"")),SetMyElement("eIngredientsID",escapeNull(t.IngredientsID,"")),SetMyElement("eCategory",escapeNull(t.Category,"")),SetMyElement("eProductName",escapeNull(t.ProductName,"")),SetMyElement("eProductDescription",escapeNull(t.ProductDescription,"")),SetChecked("eActive",escapeNull(t.active,!1)),SetChecked("eInStock",escapeNull(t.InStock,!1)),SetChecked("eFresh",escapeNull(t.Fresh,!1)),SetChecked("eFeatured",escapeNull(t.Featured,!1)),SetMyElement("eRating",escapeNull(t.Rating,"")),SetMyHTML("edate_row","Created: "+t.create_date+":"+escapeNull(t.create_user,"")+" | Modified: "+escapeNull(t.mod_date,"")+":"+escapeNull(t.mod_user,"")))}function RemoveShipping(n){confirm("Are you sure you want to remove this shipping address from your saved shipping list?")&&MyAccount.deactivate_shipping(n,ShippingListCallback)}function Validate_Product(){for(var n,t=!0,r=["eProductName","eCategory","epricing_group"],i=0;i<r.length;i++)n=document.getElementById(r[i]),val=n.value,val==""?(n.style.backgroundColor="#FFFF00",t=!1):n.style.backgroundColor="";return t||ShowAutoAlert("Form Validation","Please complete hi-lighted fields before saving...","warning",!0),t}function SaveProduct(){if(Validate_Product()){var n=ProductDetail.GetproductsClass().value;n.productID=GetMyElement("eProductID");n.pricing_group=GetMyElement("epricing_group");n.IngredientsID=GetMyElement("eIngredientsID");n.Category=GetMyElement("eCategory");n.ProductName=GetMyElement("eProductName");n.ProductDescription=GetMyElement("eProductDescription");n.active=JYesNo(GetChecked("eActive"));n.InStock=JYesNo(GetChecked("eInStock"));n.Fresh=JYesNo(GetChecked("eFresh"));n.Featured=JYesNo(GetChecked("eFeatured"));n.Rating=GetMyElement("eRating");n.create_user=username;ProductDetail.Process_products(n,SaveproductsCallback)}}function SaveproductsCallback(n){if(n.value==null||n.error!=null)ShowAutoAlert("Save Error",GetResError(n.error)+" - "+n.value,"error",!0);else{var r=n.value,i=r.split("|"),u=i[0],t=i[1];u==0?(t="("+t+") Product saved successfully!",ShowAutoAlert("Product Saved",t,"success",!0),window.setTimeout("RefreshPage()",3e3)):ShowAutoAlert("Product Save Error",t,"error",!0)}}function RefreshPage(){location.href="ProductDetail.aspx"}function NewIngredientWin(){$("#IngredientForm").modal("show");var n=GlobalAjax.GetIngredientsClass().value;SetMyElement("IngredientID",n.IngredientID);SetMyElement("IngredientName",escapeNull(n.IngredientName,""));SetMyElement("Description",escapeNull(n.Description,""));SetMyHTML("idate_row","");SetMyHTML("ierr_text","")}function New_Ingredients(){var n=GlobalAjax.GetIngredientsClass().value;SetMyElement("IngredientID",n.IngredientID);SetMyElement("IngredientName",escapeNull(n.IngredientName,""));SetMyElement("Description",escapeNull(n.Description,""));SetMyHTML("idate_row","");SetMyHTML("ierr_text","")}function Validate_Ingredients(){for(var n,t=!0,r=["IngredientName","Description"],i=0;i<r.length;i++)n=document.getElementById(r[i]),val=n.value,val==""?(n.style.backgroundColor="#FFFF00",t=!1):n.style.backgroundColor="";return t||ShowAutoAlert("Form Validation","Please complete hi-lighted fields before saving...","warning",!0),t}function SaveIngredients(){if(Validate_Ingredients()){var n=GlobalAjax.GetIngredientsClass().value;n.IngredientID=GetMyElement("IngredientID");n.IngredientName=GetMyElement("IngredientName");n.Description=GetMyElement("Description");n.create_user=myemail;GlobalAjax.Process_Ingredients(n,SaveIngredientsCallback)}}function SaveIngredientsCallback(n){if(n.value==null||n.error!=null)ShowAutoAlert("Save Error",GetResError(n.error)+" - "+n.value,"error",!0);else{var r=n.value,i=r.split("|"),u=i[0],t=i[1];u==0?(t="("+t+") Ingredient saved successfully!",ShowAutoAlert("Ingredient Saved",t,"success",!0),List_Ingredients()):ShowAutoAlert("Ingredient Save Error",t,"error",!0)}}function Get_Ingredients(n){n>=1&&($("#IngredientForm").modal("show"),GlobalAjax.GetIngredients(n,FillIngredientsForm))}function FillIngredientsForm(n){var i,t;if(n.value==null||n.error!=null)return!1;i=n.value.Tables[0].Rows.length;i>=1&&(t=n.value.Tables[0].Rows[0],SetMyElement("IngredientID",escapeNull(t.IngredientID,0)),SetMyElement("IngredientName",escapeNull(t.IngredientName,"")),SetMyElement("Description",escapeNull(t.Description,"")),SetMyHTML("idate_row","Created: "+t.create_date+":"+escapeNull(t.create_user,"")+" | Modified: "+escapeNull(t.mod_date,"")+":"+escapeNull(t.mod_user,"")),SetMyHTML("ierr_text",""))}function Delete_Ingredients(n){n>=1&&confirm("Are you sure you want to delete this record?")&&GlobalAjax.DeleteIngredients(n,Delete_IngredientsCallback)}function Delete_IngredientsCallback(n){var t=document.getElementById("IngredientList");n.value==null||n.error!=null?t.innerHTML=n.error.Message:List_Ingredients()}function List_Ingredients(){var n=GlobalAjax.ListIngredients().value;SetMyHTML("IngredientList",n)}function OrderHistory2Years(){var n=$("#MyProductID").val(),t="",r=new Date,i=r.getFullYear();n>=1&&(t=ProductDetail.GetOrderHistory(n,i).value,t+=ProductDetail.GetOrderHistory(n,i-1).value,SetMyHTML("OrderHistory",t))}function Validate_pricing(){for(var n,t=!0,r=["pricing_group","ProductPrice","Packaging","ShipWeight","ProductSize","ProductSize"],i=0;i<r.length;i++)n=document.getElementById(r[i]),val=n.value,val==""?(n.style.backgroundColor="#FFFF00",t=!1):n.style.backgroundColor="";return t||ShowAutoAlert("Form Validation","Please complete hi-lighted fields before saving...","warning",!0),t}function New_pricing(){var n=ProductDetail.GetpricingClass().value;SetMyElement("pricingID",n.pricingID);SetMyElement("pricing_group",escapeNull(n.pricing_group,""));SetMyElement("GroupName",escapeNull(n.GroupName,""));SetMyElement("pProductPrice",escapeNull(n.ProductPrice,""));SetMyElement("Packaging",escapeNull(n.Packaging,""));SetMyElement("ShipWeight",escapeNull(n.ShipWeight,""));SetMyElement("ProductSize",escapeNull(n.ProductSize,""));SetMyElement("TypeCategory",escapeNull(n.TypeCategory,""));SetMyElement("TypeQuantity",escapeNull(n.TypeQuantity,""))}function Savepricing(){if(Validate_pricing()){var n=ProductDetail.GetpricingClass().value;n.pricingID=GetMyElement("pricingID");n.pricing_group=GetMyElement("pricing_group");n.GroupName=GetMyElement("GroupName");n.ProductPrice=GetMyElement("pProductPrice");n.Packaging=GetMyElement("Packaging");n.ShipWeight=GetMyElement("ShipWeight");n.ProductSize=GetMyElement("ProductSize");n.TypeCategory=GetMyElement("TypeCategory");n.TypeQuantity=GetMyElement("TypeQuantity");n.create_user=myemail;ProductDetail.Process_pricing(n,SavepricingCallback)}}function SavepricingCallback(n){if(n.value==null||n.error!=null)ShowAutoAlert("Save Error",GetResError(n.error)+" - "+n.value,"error",!0);else{var r=n.value,i=r.split("|"),u=i[0],t=i[1];u==0?(t="("+t+") Pricing saved successfully!",ShowAutoAlert("Pricing Saved",t,"success",!0),List_pricing()):ShowAutoAlert("Pricing Save Error",t,"error",!0)}}function Get_pricing(n){n>=1&&ProductDetail.Getpricing(n,FillpricingForm)}function FillpricingForm(n){var i,t;if(n.value==null||n.error!=null)return!1;i=n.value.Tables[0].Rows.length;i>=1&&(t=n.value.Tables[0].Rows[0],SetMyElement("pricingID",escapeNull(t.pricingID,0)),SetMyElement("pricing_group",escapeNull(t.pricing_group,"")),SetMyElement("GroupName",escapeNull(t.GroupName,"")),SetMyElement("pProductPrice",escapeNull(t.ProductPrice,"")),SetMyElement("Packaging",escapeNull(t.Packaging,"")),SetMyElement("ShipWeight",escapeNull(t.ShipWeight,"")),SetMyElement("ProductSize",escapeNull(t.ProductSize,"")),SetMyElement("TypeCategory",escapeNull(t.TypeCategory,"")),SetMyElement("TypeQuantity",escapeNull(t.TypeQuantity,"")),SetMyHTML("pdate_row","Created: "+t.create_date+":"+escapeNull(t.create_user,"")+" | Modified: "+escapeNull(t.mod_date,"")+":"+escapeNull(t.mod_user,"")))}function Delete_pricing(n){n>=1&&confirm("Are you sure you want to delete this record?")&&ProductDetail.Deletepricing(n,Delete_pricingCallback)}function Delete_pricingCallback(n){var t=document.getElementById("SearchList1");n.value==null||n.error!=null?t.innerHTML=n.error.Message:List_pricing()}function List_pricing(){var n=GetMyElement("pSchemeFilter"),t=ProductDetail.Listpricing(n).value;SetMyHTML("FillPricingList",t)}$(document).ready(function(){List_Ingredients();OrderHistory2Years()});