function ShowCustomerData(){GlobalAjax.Getcustomers(customerid,FillCustomerCallback)}function FillCustomerCallback(n){var i,t;if(n.value==null||n.error!=null)return!1;i=n.value.Tables[0].Rows.length;i>=1&&(t=n.value.Tables[0].Rows[0],SetMyElement("title",escapeNull(t.title,"")),SetMyElement("company",escapeNull(t.company,"")),SetMyElement("first_name",escapeNull(t.first_name,"")),SetMyElement("last_name",escapeNull(t.last_name,"")),SetMyElement("address1",escapeNull(t.address1,"")),SetMyElement("city",escapeNull(t.city,"")),SetMyElement("state",escapeNull(t.state,"")),SetMyElement("zip",escapeNull(t.zip,"")),SetMyElement("email",escapeNull(t.email,"")),SetMyElement("password",escapeNull(t.password,"")),SetMyElement("home_phone",escapeNull(t.home_phone,"")),SetMyElement("mobile_phone",escapeNull(t.mobile_phone,"")),SetMyHTML("date_row","Created: "+t.create_date+":"+escapeNull(t.create_user,"")+" | Modified: "+escapeNull(t.mod_date,"")+":"+escapeNull(t.mod_user,"")))}function Validate_customers(){for(var n,t=!0,r=["first_name","last_name","email","password"],i=0;i<r.length;i++)n=document.getElementById(r[i]),val=n.value,val==""?(n.style.backgroundColor="#FFFF00",t=!1):n.style.backgroundColor="";return t||ShowAutoAlert("Form Validation","Please complete hi-lighted fields before saving...","warning",!0),t}function SaveMyAccount(){if(Validate_customers()){var n=GlobalAjax.GetcustomersClass().value;n.customerID=customerid;n.company=GetMyElement("company");n.title=GetMyElement("title");n.first_name=GetMyElement("first_name");n.last_name=GetMyElement("last_name");n.address1=GetMyElement("address1");n.address2=GetMyElement("address2");n.city=GetMyElement("city");n.state=GetMyElement("state");n.zip=GetMyElement("zip");n.email=GetMyElement("email");n.home_phone=GetMyElement("home_phone");n.mobile_phone=GetMyElement("mobile_phone");n.username=GetMyElement("username");n.password=GetMyElement("password");n.create_user=myemail;GlobalAjax.ProcessCustomersOnline(n,SavecustomersCallback)}}function SavecustomersCallback(n){if(n.value==null||n.error!=null)ShowAutoAlert("Save Error",GetResError(n.error)+" - "+n.value,"error",!0);else{var r=n.value,t=r.split("|"),u=t[0],i=t[1];u==0?ShowAutoAlert("Account Saved",i,"success",!0):ShowAutoAlert("Account Save Error",i,"error",!0)}}function Validate_NewAccount(){for(var n,t=!0,r=["FirstName","LastName","MyEmail","AddPassword","SaveKey"],i=0;i<r.length;i++)n=document.getElementById(r[i]),val=n.value,val==""?(n.style.backgroundColor="#FFFF00",t=!1):n.style.backgroundColor="";return t||ShowAutoAlert("Form Validation","Please complete hi-lighted fields before saving...","warning",!0),t}function CreateNewAccount(){if(Validate_NewAccount()){var n=GlobalAjax.GetcustomersClass().value;n.customerID=0;n.company=GetMyElement("CompanyName");n.title=GetMyElement("MyTitle");n.first_name=GetMyElement("FirstName");n.last_name=GetMyElement("LastName");n.address1=GetMyElement("MyStreet");n.city=GetMyElement("MyCity");n.state=GetMyElement("MyState");n.zip=GetMyElement("MyZip");n.email=GetMyElement("MyEmail");n.home_phone=GetMyElement("HomePhone");n.mobile_phone=GetMyElement("MobilePhone");n.password=GetMyElement("AddPassword");n.TestKey=GetMyElement("SaveKey");n.create_user=myemail;GlobalAjax.ProcessCustomersOnline(n,CreateCustomersCallback)}}function CreateCustomersCallback(n){if(n.value==null||n.error!=null)ShowAutoAlert("Save Error",GetResError(n.error)+" - "+n.value,"error",!0);else{var r=n.value,i=r.split("|"),u=i[0],t=i[1];u==0?(t="Your account was added successfully... You can now login with your saved details",ShowAutoAlert("Account Added",t,"success",!0),CopyLogin()):ShowAutoAlert("Account Save Error",t,"error",!0)}}function CopyLogin(){$("#Username").val($("#MyEmail").val());$("#MyPassword").val($("#AddPassword").val());DoLogin()}function SendLogin(){var n=$("#Username").val();MyAccount.ForgotLogin(n,SendLoginCallback)}function SendLoginCallback(n){if(n.value==null||n.error!=null)ShowAutoAlert("Send Details Error",GetResError(n.error)+" - "+n.value,"error",!0);else{var r=n.value,t=r.split("|"),u=t[0],i=t[1];u==0?ShowAutoAlert("Account Login Info",i,"success",!0):ShowAutoAlert("Account Login Error",i,"error",!0)}}function SaveLogin(){var n=$("#Username").val(),t=$("#MyPassword").val();storage.set("pgmyusername",n);storage.set("pgmypassword",t);ShowAutoAlert("Login Info","Your login information has been saved successfully...","success",!0)}function CheckSavedInfo(){storage&&($("#Username").val(storage.get("pgmyusername")),$("#MyPassword").val(storage.get("pgmypassword")))}function New_customers_shipping(){var n=GlobalAjax.Getcustomers_shippingClass().value;SetMyElement("shippingID",n.cust_shipID);SetMyElement("ship_name",escapeNull(n.ship_name,""));SetMyElement("ship_address1",escapeNull(n.ship_address1,""));SetMyElement("ship_address2",escapeNull(n.ship_address2,""));SetMyElement("ship_city",escapeNull(n.ship_city,""));SetMyElement("ship_state",escapeNull(n.ship_state,""));SetMyElement("ship_zip",escapeNull(n.ship_zip,""));SetMyHTML("date_row","")}function EditShipping(n){$("#AccountAddressAddForm").modal("show");GlobalAjax.Getcustomers_shipping(n,FillShippingCallback)}function FillShippingCallback(n){var i,t;if(n.value==null||n.error!=null)return!1;i=n.value.Tables[0].Rows.length;i>=1&&(t=n.value.Tables[0].Rows[0],SetMyElement("shippingID",escapeNull(t.cust_shipID,0)),SetMyElement("ship_name",escapeNull(t.ship_name,"")),SetMyElement("ship_address1",escapeNull(t.ship_address1,"")),SetMyElement("ship_address2",escapeNull(t.ship_address2,"")),SetMyElement("ship_city",escapeNull(t.ship_city,"")),SetMyElement("ship_state",escapeNull(t.ship_state,"")),SetMyElement("ship_zip",escapeNull(t.ship_zip,"")),SetMyElement("ship_phone",escapeNull(t.ship_phone,"")),SetMyHTML("date_row","Created: "+t.create_date+":"+escapeNull(t.create_user,"")+" | Modified: "+escapeNull(t.mod_date,"")+":"+escapeNull(t.mod_user,"")))}function RemoveShipping(n){confirm("Are you sure you want to remove this shipping address from your saved shipping list?")&&GlobalAjax.deactivate_shipping(n,ShippingListCallback)}function ShippingListCallback(n){var r;if(n.value==null||n.error!=null)ShowAutoAlert("Save Error",GetResError(n.error)+" - "+n.value,"error",!0);else{var u=n.value,t=u.split("|"),f=t[0],i=t[1];f==0?(ShowAutoAlert("Account Saved",i,"success",!0),r=GlobalAjax.ShippingListGet(customerid).value(),$("#ShipHistoryList").html(r)):ShowAutoAlert("Account Save Error",i,"error",!0)}}function Validate_customers_shipping(){for(var n,t=!0,r=["ship_name","ship_address1","ship_city","ship_state"],i=0;i<r.length;i++)n=document.getElementById(r[i]),val=n.value,val==""?(n.style.backgroundColor="#FFFF00",t=!1):n.style.backgroundColor="";return t||ShowAutoAlert("Form Validation","Please complete hi-lighted fields before saving...","warning",!0),t}function SaveShipping(){if(Validate_customers_shipping()){var n=GlobalAjax.Getcustomers_shippingClass().value;n.cust_shipID=GetMyElement("shippingID");n.customerID=customerid;n.ship_name=GetMyElement("ship_name");n.ship_address1=GetMyElement("ship_address1");n.ship_city=GetMyElement("ship_city");n.ship_state=GetMyElement("ship_state");n.ship_zip=GetMyElement("ship_zip");n.create_user=username;GlobalAjax.Process_customers_shipping(n,Savecustomers_shippingCallback)}}function Savecustomers_shippingCallback(n){var r;if(n.value==null||n.error!=null)ShowAutoAlert("Save Error",GetResError(n.error)+" - "+n.value,"error",!0);else{var u=n.value,t=u.split("|"),f=t[0],i=t[1];f==0?(ShowAutoAlert("Shippping Saved",i,"success",!0),r=MyAccount.ShippingListGet(customerid).value,$("#ShipHistoryList").html(r)):ShowAutoAlert("Shippping Save Error",i,"error",!0)}}function AddAddress(){New_customers_shipping();$("#AccountAddressAddForm").modal("show")}var storage=$.localStorage;$(document).ready(function(){CheckSavedInfo();ShowCustomerData()});